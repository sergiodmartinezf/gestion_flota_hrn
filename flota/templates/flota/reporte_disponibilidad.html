{% extends 'base.html' %}

{% block title %}Reporte de Disponibilidad - Gestión de Flota{% endblock %}

{% block content %}
<h2 class="mb-4"><i class="bi bi-check-circle"></i> Reporte de Disponibilidad</h2>

<div class="mb-3">
    <a href="?exportar=excel" class="btn btn-success">
        <i class="bi bi-file-earmark-excel"></i> Exportar a Excel
    </a>
</div>

<div class="table-responsive">
    <table class="table table-striped table-hover">
        <thead class="table-dark">
            <tr>
                <th>Vehículo</th>
                <th>Días Fuera de Servicio</th>
                <th>Incidentes</th>
                <th>Estado Actual</th>
            </tr>
        </thead>
    <tbody>
        {% for item in reporte %}
        <tr>
            <td><strong>{{ item.vehiculo.patente }}</strong></td>
            <td>{{ item.dias_fuera_servicio }}</td>
            <td>{{ item.incidentes }}</td>
            <td>
                {% if item.estado == 'Disponible' %}
                    <span class="badge bg-success">{{ item.estado }}</span>
                {% else %}
                    <span class="badge bg-secondary">{{ item.estado }}</span>
                {% endif %}
            </td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="4" class="text-center">No hay datos disponibles.</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
</div>
{% endblock %}

